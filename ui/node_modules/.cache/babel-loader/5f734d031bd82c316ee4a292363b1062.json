{"ast":null,"code":"const {\n  RequestAbortedError\n} = require('../core/errors');\n\nconst kListener = Symbol('kListener');\nconst kSignal = Symbol('kSignal');\n\nfunction abort(self) {\n  if (self.abort) {\n    self.abort();\n  } else {\n    self.onError(new RequestAbortedError());\n  }\n}\n\nfunction addSignal(self, signal) {\n  self[kSignal] = null;\n  self[kListener] = null;\n\n  if (!signal) {\n    return;\n  }\n\n  if (signal.aborted) {\n    abort(self);\n    return;\n  }\n\n  self[kSignal] = signal;\n\n  self[kListener] = () => {\n    abort(self);\n  };\n\n  if ('addEventListener' in self[kSignal]) {\n    self[kSignal].addEventListener('abort', self[kListener]);\n  } else {\n    self[kSignal].addListener('abort', self[kListener]);\n  }\n}\n\nfunction removeSignal(self) {\n  if (!self[kSignal]) {\n    return;\n  }\n\n  if ('removeEventListener' in self[kSignal]) {\n    self[kSignal].removeEventListener('abort', self[kListener]);\n  } else {\n    self[kSignal].removeListener('abort', self[kListener]);\n  }\n\n  self[kSignal] = null;\n  self[kListener] = null;\n}\n\nmodule.exports = {\n  addSignal,\n  removeSignal\n};","map":{"version":3,"sources":["/home/cameron/Dev/whoisWrapper/ui/node_modules/undici/lib/api/abort-signal.js"],"names":["RequestAbortedError","require","kListener","Symbol","kSignal","abort","self","onError","addSignal","signal","aborted","addEventListener","addListener","removeSignal","removeEventListener","removeListener","module","exports"],"mappings":"AAAA,MAAM;AAAEA,EAAAA;AAAF,IAA0BC,OAAO,CAAC,gBAAD,CAAvC;;AAEA,MAAMC,SAAS,GAAGC,MAAM,CAAC,WAAD,CAAxB;AACA,MAAMC,OAAO,GAAGD,MAAM,CAAC,SAAD,CAAtB;;AAEA,SAASE,KAAT,CAAgBC,IAAhB,EAAsB;AACpB,MAAIA,IAAI,CAACD,KAAT,EAAgB;AACdC,IAAAA,IAAI,CAACD,KAAL;AACD,GAFD,MAEO;AACLC,IAAAA,IAAI,CAACC,OAAL,CAAa,IAAIP,mBAAJ,EAAb;AACD;AACF;;AAED,SAASQ,SAAT,CAAoBF,IAApB,EAA0BG,MAA1B,EAAkC;AAChCH,EAAAA,IAAI,CAACF,OAAD,CAAJ,GAAgB,IAAhB;AACAE,EAAAA,IAAI,CAACJ,SAAD,CAAJ,GAAkB,IAAlB;;AAEA,MAAI,CAACO,MAAL,EAAa;AACX;AACD;;AAED,MAAIA,MAAM,CAACC,OAAX,EAAoB;AAClBL,IAAAA,KAAK,CAACC,IAAD,CAAL;AACA;AACD;;AAEDA,EAAAA,IAAI,CAACF,OAAD,CAAJ,GAAgBK,MAAhB;;AACAH,EAAAA,IAAI,CAACJ,SAAD,CAAJ,GAAkB,MAAM;AACtBG,IAAAA,KAAK,CAACC,IAAD,CAAL;AACD,GAFD;;AAIA,MAAI,sBAAsBA,IAAI,CAACF,OAAD,CAA9B,EAAyC;AACvCE,IAAAA,IAAI,CAACF,OAAD,CAAJ,CAAcO,gBAAd,CAA+B,OAA/B,EAAwCL,IAAI,CAACJ,SAAD,CAA5C;AACD,GAFD,MAEO;AACLI,IAAAA,IAAI,CAACF,OAAD,CAAJ,CAAcQ,WAAd,CAA0B,OAA1B,EAAmCN,IAAI,CAACJ,SAAD,CAAvC;AACD;AACF;;AAED,SAASW,YAAT,CAAuBP,IAAvB,EAA6B;AAC3B,MAAI,CAACA,IAAI,CAACF,OAAD,CAAT,EAAoB;AAClB;AACD;;AAED,MAAI,yBAAyBE,IAAI,CAACF,OAAD,CAAjC,EAA4C;AAC1CE,IAAAA,IAAI,CAACF,OAAD,CAAJ,CAAcU,mBAAd,CAAkC,OAAlC,EAA2CR,IAAI,CAACJ,SAAD,CAA/C;AACD,GAFD,MAEO;AACLI,IAAAA,IAAI,CAACF,OAAD,CAAJ,CAAcW,cAAd,CAA6B,OAA7B,EAAsCT,IAAI,CAACJ,SAAD,CAA1C;AACD;;AAEDI,EAAAA,IAAI,CAACF,OAAD,CAAJ,GAAgB,IAAhB;AACAE,EAAAA,IAAI,CAACJ,SAAD,CAAJ,GAAkB,IAAlB;AACD;;AAEDc,MAAM,CAACC,OAAP,GAAiB;AACfT,EAAAA,SADe;AAEfK,EAAAA;AAFe,CAAjB","sourcesContent":["const { RequestAbortedError } = require('../core/errors')\n\nconst kListener = Symbol('kListener')\nconst kSignal = Symbol('kSignal')\n\nfunction abort (self) {\n  if (self.abort) {\n    self.abort()\n  } else {\n    self.onError(new RequestAbortedError())\n  }\n}\n\nfunction addSignal (self, signal) {\n  self[kSignal] = null\n  self[kListener] = null\n\n  if (!signal) {\n    return\n  }\n\n  if (signal.aborted) {\n    abort(self)\n    return\n  }\n\n  self[kSignal] = signal\n  self[kListener] = () => {\n    abort(self)\n  }\n\n  if ('addEventListener' in self[kSignal]) {\n    self[kSignal].addEventListener('abort', self[kListener])\n  } else {\n    self[kSignal].addListener('abort', self[kListener])\n  }\n}\n\nfunction removeSignal (self) {\n  if (!self[kSignal]) {\n    return\n  }\n\n  if ('removeEventListener' in self[kSignal]) {\n    self[kSignal].removeEventListener('abort', self[kListener])\n  } else {\n    self[kSignal].removeListener('abort', self[kListener])\n  }\n\n  self[kSignal] = null\n  self[kListener] = null\n}\n\nmodule.exports = {\n  addSignal,\n  removeSignal\n}\n"]},"metadata":{},"sourceType":"script"}