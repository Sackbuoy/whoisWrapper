{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.newCachePolicy = void 0;\n\nconst apollo_server_types_1 = require(\"apollo-server-types\");\n\nfunction newCachePolicy() {\n  return {\n    maxAge: undefined,\n    scope: undefined,\n\n    restrict(hint) {\n      if (hint.maxAge !== undefined && (this.maxAge === undefined || hint.maxAge < this.maxAge)) {\n        this.maxAge = hint.maxAge;\n      }\n\n      if (hint.scope !== undefined && this.scope !== apollo_server_types_1.CacheScope.Private) {\n        this.scope = hint.scope;\n      }\n    },\n\n    replace(hint) {\n      if (hint.maxAge !== undefined) {\n        this.maxAge = hint.maxAge;\n      }\n\n      if (hint.scope !== undefined) {\n        this.scope = hint.scope;\n      }\n    },\n\n    policyIfCacheable() {\n      var _a;\n\n      if (this.maxAge === undefined || this.maxAge === 0) {\n        return null;\n      }\n\n      return {\n        maxAge: this.maxAge,\n        scope: (_a = this.scope) !== null && _a !== void 0 ? _a : apollo_server_types_1.CacheScope.Public\n      };\n    }\n\n  };\n}\n\nexports.newCachePolicy = newCachePolicy;","map":{"version":3,"sources":["../src/cachePolicy.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,qBAAA,GAAA,OAAA,CAAA,qBAAA,CAAA;;AAEA,SAAgB,cAAhB,GAA8B;AAC5B,SAAO;AACL,IAAA,MAAM,EAAE,SADH;AAEL,IAAA,KAAK,EAAE,SAFF;;AAGL,IAAA,QAAQ,CAAC,IAAD,EAAgB;AACtB,UACE,IAAI,CAAC,MAAL,KAAgB,SAAhB,KACC,KAAK,MAAL,KAAgB,SAAhB,IAA6B,IAAI,CAAC,MAAL,GAAc,KAAK,MADjD,CADF,EAGE;AACA,aAAK,MAAL,GAAc,IAAI,CAAC,MAAnB;AACD;;AACD,UAAI,IAAI,CAAC,KAAL,KAAe,SAAf,IAA4B,KAAK,KAAL,KAAe,qBAAA,CAAA,UAAA,CAAW,OAA1D,EAAmE;AACjE,aAAK,KAAL,GAAa,IAAI,CAAC,KAAlB;AACD;AACF,KAbI;;AAcL,IAAA,OAAO,CAAC,IAAD,EAAgB;AACrB,UAAI,IAAI,CAAC,MAAL,KAAgB,SAApB,EAA+B;AAC7B,aAAK,MAAL,GAAc,IAAI,CAAC,MAAnB;AACD;;AACD,UAAI,IAAI,CAAC,KAAL,KAAe,SAAnB,EAA8B;AAC5B,aAAK,KAAL,GAAa,IAAI,CAAC,KAAlB;AACD;AACF,KArBI;;AAsBL,IAAA,iBAAiB,GAAA;;;AACf,UAAI,KAAK,MAAL,KAAgB,SAAhB,IAA6B,KAAK,MAAL,KAAgB,CAAjD,EAAoD;AAClD,eAAO,IAAP;AACD;;AACD,aAAO;AAAE,QAAA,MAAM,EAAE,KAAK,MAAf;AAAuB,QAAA,KAAK,EAAE,CAAA,EAAA,GAAA,KAAK,KAAL,MAAU,IAAV,IAAU,EAAA,KAAA,KAAA,CAAV,GAAU,EAAV,GAAc,qBAAA,CAAA,UAAA,CAAW;AAAvD,OAAP;AACD;;AA3BI,GAAP;AA6BD;;AA9BD,OAAA,CAAA,cAAA,GAAA,cAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.newCachePolicy = void 0;\nconst apollo_server_types_1 = require(\"apollo-server-types\");\nfunction newCachePolicy() {\n    return {\n        maxAge: undefined,\n        scope: undefined,\n        restrict(hint) {\n            if (hint.maxAge !== undefined &&\n                (this.maxAge === undefined || hint.maxAge < this.maxAge)) {\n                this.maxAge = hint.maxAge;\n            }\n            if (hint.scope !== undefined && this.scope !== apollo_server_types_1.CacheScope.Private) {\n                this.scope = hint.scope;\n            }\n        },\n        replace(hint) {\n            if (hint.maxAge !== undefined) {\n                this.maxAge = hint.maxAge;\n            }\n            if (hint.scope !== undefined) {\n                this.scope = hint.scope;\n            }\n        },\n        policyIfCacheable() {\n            var _a;\n            if (this.maxAge === undefined || this.maxAge === 0) {\n                return null;\n            }\n            return { maxAge: this.maxAge, scope: (_a = this.scope) !== null && _a !== void 0 ? _a : apollo_server_types_1.CacheScope.Public };\n        },\n    };\n}\nexports.newCachePolicy = newCachePolicy;\n//# sourceMappingURL=cachePolicy.js.map"]},"metadata":{},"sourceType":"script"}